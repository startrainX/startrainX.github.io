### web及网络基础

> #### tcp/ip

- 应用层、传输层、网络层、数据链路层
- tcp协议：三次握手，发送端发送syn标志的数据包给接收端，接收端接收到数据后返回一个带有syn/ack标志的数据包给发送端以示确认收到，发送端最后再回传一个ack的数据包给接收端，代表握手结束。
- uri: 统一资源标志符 url: 统一资源定位符 url包含与uri。uri用字符串标记某一互联网资源，url表示资源的地点。

### 简单的http协议

> http是不保存状态的协议，也就是说，http不会对请求或者响应做持久化处理。这是为了更快的处理大量事务。

> Cookie技术：http是无状态的协议，也就是说，它无法根据之前请求的状态来处理当前的请求。如：登录后的账户如果不记录已登录的状，那么每次跳转页面就都是重新登录，或者在每次的请求报文中附加参数来管理登录状态。为了解决这个问题引入了Cookie技术。Cookie会根据从服务端发送的响应报文内的set—Cookie的首部字段信息，通知客户端保存Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入Cookie值发送出去。

### HTTP状态码

> 状态码由三位数字和原因短语组成。数字中的第一位指定了响应类别，响应类别有以下五种。

|      | 类别                           | 原因短语                   |
| ---- | ------------------------------ | -------------------------- |
| 1xx  | information(信息性状态码)      | 接收的请求正在处理         |
| 2xx  | Success(成功状态码)            | 请求正常处理完毕           |
| 3xx  | Redirection(重定向状态码)      | 需要进行附加操作以完成请求 |
| 4xx  | Client Error(客户端错误状态码) | 服务器无法处理请求         |
| 5xx  | Server Error(服务器错误状态码) | 服务器处理请求出错         |

403: 不允许访问的资源

503：服务器超负载或进行停机维护中。

### 与HTTP协作的Web服务器

#### 通信数据转发程序：代理、网关、隧道

> 代理：

- 代理服务器的基本行为就是接收客户端发送的请求后转发给其他服务器。在HTTP通信过程中，可级联多台代理服务器。请求和响应的转发会经过数台类似锁链一样连接起来的代理服务器。转发时，需要附加Via首部字段以标记出经过的主机信息。
- 使用代理服务器的理由有：利用缓存技术（稍后讲解）减少网络带宽的流量，组织内部针对特定网站的访问控制，以获取访问日志为主要目的，等等。代理转发响应时，缓存代理（Caching Proxy）会预先将资源的副本（缓存）保存在代理服务器上。当代理再次接收到对相同资源的请求时，就可以不从源服务器那里获取资源，而是将之前缓存的资源作为响应返回。

> 网关

- 网关的工作机制和代理十分相似。而网关能使通信线路上的服务器提供非 HTTP 协议服务。
- 利用网关能提高通信的安全性，因为可以在客户端与网关之间的通信线路上加密以确保连接的安全。比如，网关可以连接数据库，使用 SQL 语句查询数据。另外，在 Web 购物网站上进行信用卡结算时，网关可以和信用卡结算系统联动。

> 隧道

- 隧道可按要求建立起一条与其他服务器的通信线路，届时使用 SSL 等加密手段进行通信。隧道的目的是确保客户端能与服务器进行安全的通信。
- 隧道本身不会去解析 HTTP 请求。也就是说，请求保持原样中转给之后的服务器。隧道会在通信双方断开连接时结束。（VPN？）

### HTTPS

- SSL 安全套接层
- TLS 安全层传输协议
- TSL 是以 SSL为原型开发的协议，有时会统一称该协议为 SSL。
- 用SSL建立安全通信线路后，进行HTTP通信，也就是两者的组合使用就是HTTPS。通常http直接和tcp通信，当使用ssl时，则演变成先和ssl通信，再由ssl和tcp通信。
- 两种加密方式：
  - 共享密钥加密（对称密钥加密）：传输内容进行加密，但是是使用同一把钥匙，只要获得了钥匙，谁都可以解开。问题是，钥匙也得发给对方，还是会有发送的安全问题。
  - 公开密钥加密（非对称密钥加密）：有两把钥匙，使用公开密钥进行加密，公开密钥可以随便发送，加密后的内容只有使用私有密钥才能解密。SSL使用的就是非对称密钥加密。
- HTTPS采用混合加密机制，因为公开密钥加密的处理速度比较慢。因此，HTTPS使用公开密钥加密方式将共享密钥的钥匙发送给对方，然后使用共享密钥加密方式来进行通信。